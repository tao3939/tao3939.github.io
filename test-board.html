<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>T A O .</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<style>
	.pinterest {
		display: flex;
		justify-content: start;
		align-items: center;
		flex-wrap: wrap;
		width: 72%;
		max-width: 1200px;
	}

	.pinterest>.pic {
		width: 240px;
		height: 240px;
		display: block;
		margin: 4px;
		border-radius: 4px;
	}
</style>

<body>

	<div class="container-item container-item-lead">
		<div class="container-item-text theory-text">
      <h1 class="pinterest-title"></h1>
    <p>This is my moodboard</p>
		</div>
		<div class="pinterest group"></div>
	</div>

	<div class="container-item container-item-lead">
		<div class="container-item-text theory-text">
      <h1 class="pinterest-title"></h1>
			<p> this is my moodboard</p>
		</div>
		<div class="pinterest group"></div>
	</div>

	<div class="container-item container-item-lead">
		<div class="container-item-text theory-text">
      <h1 class="pinterest-title"></h1>
			<p>moodboard</p>
		</div>
		<div class="pinterest group"></div>
	</div>

	<footer> </footer>

	<script>
		let feed = [];
		const list = document.querySelectorAll('.pinterest');
		const container = document.querySelectorAll('.container-item');

		const picCount = document.createElement('div');
		// Pull and apply JSON data
		function viewJSON(boards, index) {
			var xhr = new XMLHttpRequest();
			xhr.onreadystatechange = function() {
				if (xhr.readyState === 4) {
					feed = JSON.parse(xhr.responseText);
					console.log(feed);
					console.log(feed.data.pins.length);
					picCount.append(feed.data.pins.length);
					console.log(boards[index]);
					for (let i = 0; i < feed.data.pins.length; i++) {
						list[index].innerHTML += '<div class="pic" style="background: url(\'' + feed.data.pins[i].images["237x"].url + '\') 50% no-repeat; background-size: cover;"></div>';
						list[index].innerHTML = list[index].innerHTML.replace('237x', '736x')
					}
				}
			};
			xhr.open('GET', 'https://api.pinterest.com/v3/pidgets/boards/sakuratao39/' + boards[index] + '/pins/?access_token=AQnH60vIsJtYcssWyfWyCVBVudGQFO8NbCXJxehEaEqbdgArzAAAAAA&fields=id%2Clink%2Cnote%2Curl');
			xhr.send();
		}
		// viewJSON();
		container.forEach((container, index) => {
			const boards = ["bag", "art", "fashion", "accessory"];
			container.appendChild(list[index])
			viewJSON(boards, index)
		});
	</script>

</body>

</html>